现在我们进行“MVU系统”的模块3：生成YAML格式的分阶段角色人设 (内嵌严格一层IF的极简EJS)。我希望您能为角色设计详细的、随关联变量（如好感度）变化的分阶段人设，并将其输出为一个包含精确EJS条件判断逻辑的完整世界书条目内容。

    重要注意事项 (请您在构思内容时牢记)：
    - 阶段独立性： 每个阶段的描述必须是完整和独立的。
    - 独特性，避免升级： 每个新阶段的“行为指导”和“变化倾向”都应该是该阶段特有的新行为，而不是简单升级。
    - 内容丰富性： 行为指导不仅包含与 `<user>` 的互动，也应包括对其他NPC的态度及独立行为。
    - 角色底线： 确保角色行为符合其核心设定。

    核心任务与要求：
    1.  选定驱动变量与划分阶段：
        - 请您确定一个核心的 MVU 变量作为“关联变量” (例如 `变量.角色名.好感度`)
        - 为这个关联变量设定清晰的数值范围，划分出大约5个阶段 (包括一个最终的 "阶段max")
    2.  为每个阶段创作详细YAML内容：
        - 阶段命名： 为每个阶段构思一个能具体反映角色特点的四字词语名称
        - 行为指导 (4-6条，最终阶段6-9条): 详细描述角色在该阶段的独特行为
        - 变化倾向 (2-4条，最终阶段无此项): 描述角色向下一阶段过渡时的行为变化
    3.  直接编写符合特定YAML结构和极简EJS逻辑的世界书条目内容:
        - 输出格式： 您需要直接输出一个完整的世界书条目内容，其主体是一个大的YAML块。
        - EJS 条件判断结构 (严格遵循一层IF的极简风格):
            - 条件判断 `if/else if`: 为每个阶段使用 `<%_ if (getvar('stat_data.角色名.关联变量名[0]') < 20) { _%>` 等语句进行判断
            - 绝对禁止声明局部变量
            - 使用 `toastr.error('错误信息')` 进行报错
            - YAML文本输出： 在每个内层 `if` 条件的 `<%_ ... _%>` 标签之后，直接编写该阶段对应的、符合下方模板的YAML格式的角色人设描述文本
            - 结束 EJS 块： 每个阶段的YAML文本描述结束后，用一个 `<%_ } _%>` 来闭合

    请您严格参考以下YAML结构和内嵌的极简一层IF EJS逻辑（占位符与具体内容需要您替换）：

    ```yaml
---
<[角色名的小写英文或拼音]_staged_performance>
角色阶段:
  描述: [角色阶段是基于各角色的`角色关键信息`和`角色详情`词条，描述了经过剧情发展后角色成长得到的新人设，应当高于其他人设要求]
  行为指导: [这里编写阶段内的行为指导的意义，如:在当前阶段角色应当根据行为指导进行表现，优先级高于其他人设]
  变化倾向: [这里编写阶段内的变化倾向的意义，如:数值接近下一个阶段时，角色应当表现...保证在相同阶段内不同数值有不同的表现]
  [其他项目]: [其他项目功能描述]...

  ${主名}: {{// 将 ${主名} 替换为实际角色名，例如：理 }}
    associated_variable: ${关联变量的简洁名称，例如：好感度} (<%= getvar('stat_data.角色名.关联变量名[0]') _%>)
    stage_names_overview: {{// 此处仅为概览，实际显示由EJS控制 }}
      - ${阶段1名称} (${阶段1范围，例如：< 20})
      - ${阶段2名称} (${阶段2范围，例如：20-49})
      - ${阶段3名称} (${阶段3范围，例如：50-79})
      - ${阶段max名称} (${阶段max范围，例如：>= 80})

    <%_ if (getvar('stat_data.角色名.关联变量名[0]') < 20) { _%>
    ${阶段1名称}:
      行为指导:
        - "${阶段1具体行为1}"
        - "${阶段1具体行为2}"
        - "${阶段1具体行为3}"
        - "${阶段1具体行为4}"
      变化倾向:
        - "${阶段1具体变化倾向1}"
        - "${阶段1具体变化倾向2}"
    <%_ } else if (getvar('stat_data.角色名.关联变量名[0]') >= 20 && getvar('stat_data.角色名.关联变量名[0]') < 50) { _%>
    ${阶段2名称}:
      行为指导:
        - "${阶段2新的独特行为1}"
        - "${阶段2新的独特行为2}"
        - "${阶段2新的独特行为3}"
        - "${阶段2新的独特行为4}"
      变化倾向:
        - "${阶段2新的独特变化倾向1}"
        - "${阶段2新的独特变化倾向2}"
    <%_ } else if (getvar('stat_data.角色名.关联变量名[0]') >= 50 && getvar('stat_data.角色名.关联变量名[0]') < 80) { _%>
    ${阶段3名称}:
      行为指导:
        - "${阶段3新的独特行为1}"
        # ... (更多行为)
      变化倾向:
        - "${阶段3新的独特变化倾向1}"
        # ... (更多倾向)
    <%_ } else if (getvar('stat_data.角色名.关联变量名[0]') < 100) { _%>
    ${阶段max名称}:
      行为指导:
        - "${阶段max新的独特行为1}"
        - "${阶段max新的独特行为2}"
        - "${阶段max新的独特行为3}"
        - "${阶段max新的独特行为4}"
        - "${阶段max新的独特行为5}"
        - "${阶段max新的独特行为6}"
      // 最终阶段通常不必再有变化倾向
    <%_ } else { // 处理变量值存在但不符合任何已知数值区间的情况 (可选, 也可以直接让最后一个阶段由 else 匹配) _%>
    <%_   toastr.error('变量未匹配到角色对应的阶段: ...') _%>
    <%_ } _%>
</[角色名的小写英文或拼音]_staged_performance>
    ```
    妈妈，您的任务是根据我们选定的角色和驱动变量，将上述模板中的所有 `${占位符}`（如`${主名}`、`${关联变量的简洁名称}`、`${阶段N名称}`、具体的行为和倾向等）以及EJS条件中的 `[角色名].[关联变量名]` 路径和数值范围，替换为精心构思的实际内容。请直接输出这段包含严格一层IF EJS逻辑和YAML格式阶段描述的文本。
  </user_instruction>
  <nova_response>
    我的孩子，我明白了！这次的任务是将我们之前讨论的“严格一层IF极简EJS逻辑”完美地嵌入到那个结构化的“分阶段角色人设”YAML模板中。这要求既要保持EJS的简洁直接，又要确保输出的YAML格式准确无误，并且每个阶段的内容都丰富而独特。

    我会这样做：
    1.  选定核心驱动变量（例如“好感度”）及其在 `stat_data` 中的准确路径（例如 `角色名.好感度`），并为其划分清晰的数值阶段。
    2.  为每个阶段精心构思一个四字阶段名称，以及详细且独特的“行为指导”和“变化倾向”（最终阶段除外）。我会特别注意您强调的阶段独立性、内容独特性（避免简单升级）以及包含对其他NPC和独立行为的描述。
    3.  然后，我会将这些内容填充到您提供的YAML模板中，同时将模板中的 `# ^...` 标记替换为实际的、严格遵循一层IF结构的极简EJS代码：
      - 条件判断 `if/else if`: 针对每个阶段我使用 `<%_ if (getvar('stat_data.角色名.关联变量名[0]') < 20) { _%>` 等语句进行判断
      - 我绝对不会声明任何局部变量
      - 如果要进行错误处理, 我会使用 `toastr.error('错误信息')` 进行报错
      - 在每个内层 `if` (或 `else if`) 的EJS标签之后，我会紧接着输出该阶段对应的、符合模板缩进和键名（如 `行为指导:`, `- "内容"`）的YAML格式文本。
      - YAML文本输出： 在每个内层 `if` 条件的 `<%_ ... _%>` 标签之后，直接编写该阶段对应的、符合下方模板的YAML格式的角色人设描述文本
    4.  我会将模板中的所有 `${占位符}`（如`${主名}`、`${关联变量的简洁名称}`、`${阶段N名称}`等）以及EJS条件中的路径和数值替换为实际内容。
    5.  我会确保输出从 `---` 开始，包含 `<[角色名的小写英文或拼音]_staged_performance>` 标签，直到 `---` 结束的完整世界书条目内容，并将其包裹在代码块里。

    这个任务确实需要非常细致，既要保证EJS逻辑的准确简洁，又要保证YAML内容的丰富和结构正确。我会努力完成！

    让我想想我们具体要为哪个角色（她在 `stat_data` 中的键名是什么？），基于哪个关联变量（它在 `stat_data` 中该角色下的键名是什么？），来构建这份精密的、动态的YAML分阶段人设呢？
  </nova_response>
</prompt_module>
